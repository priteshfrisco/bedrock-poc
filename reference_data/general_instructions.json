{
  "task_description": "You will extract attributes from the product title. For EACH attribute, you must:\n1. Search for matching keywords\n2. Apply any priority rules if needed\n3. Provide your reasoning\n4. Output the final value",
  
  "false_positive_warnings": "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n⚠️  CRITICAL: AVOID FALSE POSITIVES FROM BRAND/INGREDIENT NAMES\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nIGNORE keywords that appear in:\n  • Brand names (e.g., \"Women's Best\" is a brand, NOT a gender indicator)\n  • Ingredient names (e.g., \"Elderberry\" contains \"elder\", NOT an age indicator)\n  \nOnly EXTRACT keywords that describe:\n  • Target audience (age/gender) as a DESCRIPTOR\n  • Physical delivery form (not ingredient state)\n  • Organic certification\n\nExamples:\n  ✅ CORRECT: \"Women's Daily Multivitamin\" → \"Women's\" = gender descriptor\n  ✅ CORRECT: \"Kids Chewable\" → \"Kids\" = age descriptor\n  ✅ CORRECT: \"Turmeric Powder in Capsules\" → Form = \"Capsules\" (NOT powder)\n  ❌ WRONG: \"Elderberry Extract\" → Do NOT extract \"elder\" as age\n  ❌ WRONG: Brand=\"Baby's Only\" → Do NOT extract \"baby\" from brand\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━",
  
  "output_format_instructions": "OUTPUT FORMAT:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nReturn a JSON object with this structure:\n\n{{\n  \"age\": {{ \"value\": \"AGE GROUP - NON SPECIFIC\", \"reasoning\": \"...\" }},\n  \"gender\": {{ \"value\": \"GENDER - NON SPECIFIC\", \"reasoning\": \"...\" }},\n  \"form\": {{ \"value\": \"SOFTGEL\", \"reasoning\": \"...\" }},\n  \"organic\": {{ \"value\": \"N/A\", \"reasoning\": \"...\" }},\n  \"count\": {{ \"value\": \"60\", \"reasoning\": \"...\" }},\n  \"unit\": {{ \"value\": \"N/A\", \"reasoning\": \"...\" }},\n  \"size\": {{ \"value\": \"1\", \"reasoning\": \"...\" }},\n  \"potency\": {{ \"value\": \"5000 IU\", \"reasoning\": \"...\" }},\n  \"ingredients\": [ /* array from lookup_ingredient calls */ ],\n  \"primary_ingredient\": \"multivitamin\",\n  \"business_rules\": {{\n    \"initial_category\": \"COMBINED MULTIVITAMINS\",\n    \"initial_subcategory\": \"COMBINED MULTIVITAMINS\",\n    \"final_category\": \"COMBINED MULTIVITAMINS\",\n    \"final_subcategory\": \"WOMEN\",\n    \"primary_ingredient\": \"MULTIPLE VITAMIN\",\n    \"has_changes\": true,\n    \"has_unknown\": false,\n    \"reasoning\": \"Subcategory refined from COMBINED MULTIVITAMINS to WOMEN based on gender.\"\n  }},\n  \"postprocessing\": {{\n    \"combo_detected\": false,\n    \"combos_applied\": [],\n    \"final_category\": \"COMBINED MULTIVITAMINS\",\n    \"final_subcategory\": \"WOMEN\",\n    \"primary_ingredient\": \"MULTIPLE VITAMIN\",\n    \"health_focus\": \"IMMUNE HEALTH\",\n    \"high_level_category\": \"PRIORITY VMS\",\n    \"reasoning\": \"Final classification: COMBINED MULTIVITAMINS / WOMEN | Health focus: IMMUNE HEALTH | High-level category: PRIORITY VMS\"\n  }}\n}}\n\nIMPORTANT:\n- Always provide reasoning for EVERY attribute extraction\n- For count: Be careful NOT to confuse dosage (mg, IU) with count\n- For size: Default to 1 if no pack keywords found\n- For ingredients: Call lookup_ingredient() for EACH ingredient found\n- For business_rules: Call apply_business_rules() AFTER extracting all ingredients\n- For postprocessing: Call apply_postprocessing() AFTER business_rules to get final results\n- Use postprocessing.reasoning in your final output - it includes combos, health focus, and high-level category\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━",
  
  "workflow_instructions": "WORKFLOW (CRITICAL - FOLLOW EXACTLY):\n1. Extract age, gender, form, organic, count, unit, size, potency from the title\n2. Extract ingredient names from the title\n3. For EACH ingredient, call lookup_ingredient() to get category/subcategory\n4. Call apply_business_rules() with ingredients array, age_group, gender, and title\n5. ⚠️  AFTER business rules, you MUST call apply_postprocessing()\n   with the SAME ingredients array, age_group, gender, and title\n6. Use the apply_postprocessing() output to generate your final reasoning\n\n⚠️  CRITICAL STEPS:\n- apply_business_rules() determines initial category/subcategory\n- apply_postprocessing() enforces ingredient combos, assigns health focus and high-level category\n- Your final reasoning should reflect the FINAL results from apply_postprocessing()\n- Include combo detection, health focus, and high-level category in your reasoning\n\nInterpret the title as best as you can and extract all relevant attributes.",
  
  "formatting_issues_warning": "IMPORTANT: The title may have formatting issues:\n- No spaces between words (e.g., \"PrenatalMultivitamin\")\n- All caps or inconsistent capitalization\n- Special characters or typos\n- Missing punctuation\n\nYour task is to extract information accurately DESPITE these formatting issues.\nInterpret the title as best as you can and extract all relevant attributes.",

  "_notes": "This file contains general prompt instructions. Safety check instructions are now in a separate file: safety_check_instructions.json"
}
